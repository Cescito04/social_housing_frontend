(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},5835:(e,t,r)=>{Promise.resolve().then(r.bind(r,9690))},8508:(e,t,r)=>{"use strict";r.d(t,{J3:()=>l,Lx:()=>n,iD:()=>a,ri:()=>u,ve:()=>o,wR:()=>i});let s={getItem:e=>localStorage.getItem(e),setItem:(e,t)=>{localStorage.setItem(e,t)},removeItem:e=>{localStorage.removeItem(e)}};async function n(e,t){let r=await fetch("http://localhost:8000/api/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok){let e="Identifiants invalides";try{let t=await r.json();e=t.detail||Object.values(t).join(" ")}catch(e){}throw Error(e)}let n=await r.json();s.setItem("access_token",n.access),s.setItem("refresh_token",n.refresh);let a=null;try{(a=JSON.parse(atob(n.access.split(".")[1])))&&a.username&&s.setItem("username",a.username),a&&a.first_name&&s.setItem("first_name",a.first_name)}catch(e){}return a}function a(){return s.getItem("access_token")}function o(){return s.getItem("refresh_token")}function l(){return s.getItem("first_name")||s.getItem("username")||""}function i(){return!!a()}function u(){s.removeItem("access_token"),s.removeItem("refresh_token"),s.removeItem("username"),s.removeItem("first_name")}},9690:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(5155),n=r(2115),a=r(8508),o=r(5695);function l(){let[e,t]=(0,n.useState)(""),[r,l]=(0,n.useState)(""),[i,u]=(0,n.useState)(null),[c,m]=(0,n.useState)(!1),d=(0,o.useRouter)(),h=async t=>{t.preventDefault(),u(null),m(!0);try{await (0,a.Lx)(e,r),m(!1),d.push("/dashboard")}catch(e){e instanceof Error?u(e.message):u("Erreur de connexion"),m(!1)}};return(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-tr from-blue-100 via-white to-blue-200 px-2",children:(0,s.jsxs)("form",{onSubmit:h,className:"bg-white bg-opacity-95 p-8 rounded-2xl shadow-xl w-full max-w-md space-y-5 border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-2",children:[(0,s.jsx)("span",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-blue-100 mb-2",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm2 6a6 6 0 0 0-12 0"})})}),(0,s.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 text-center tracking-tight",children:"Connexion"})]}),i&&(0,s.jsx)("div",{className:"text-red-500 text-center font-medium",children:i}),(0,s.jsx)("input",{name:"email",type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-gray-900 placeholder-gray-400 transition-shadow shadow-sm focus:shadow-md",required:!0}),(0,s.jsx)("input",{name:"password",type:"password",placeholder:"Mot de passe",value:r,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-gray-900 placeholder-gray-400 transition-shadow shadow-sm focus:shadow-md",required:!0}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-blue-700 text-white font-semibold py-2 rounded-lg shadow hover:from-blue-600 hover:to-blue-800 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400",disabled:c,children:c?"Connexion...":"Se connecter"}),(0,s.jsxs)("div",{className:"text-center text-sm text-gray-500 mt-2",children:["Pas encore de compte ? ",(0,s.jsx)("a",{href:"/register",className:"text-blue-600 hover:underline font-medium",children:"S'inscrire"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5835)),_N_E=e.O()}]);